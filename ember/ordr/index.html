<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8" />

    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>Ordr: Rstaurant Mnu Systm</title>

    <!-- Included CSS Files (Compressed) -->
    <link rel="stylesheet" href="css/foundation.css">
    <link rel="stylesheet" href="css/app.css">
  </head>
  <body>
  
  <!-- ember is tightly integrated with the handlebars templating system ==> type="text/x-handlebars"
  No live reload, refresh the browser (localhost:3000)
  If no text appears, "Inspect element" in chrome dev tools and see console
  -->
  <!--
  By default, the very first handlbars template defined will be used as the application template, but we can also explicitly define its id.
  Note that in 1.0.0 you can just use id instead of data-template-name
  -->
  <script type="text/x-handlebars" data-template-name="application">
    <!--
    Handlebars use double squiggly braces to render values, variables, or things with special meaning in templates.
    `outlet` is one of them - a placeholder for the rendered output of other (child) controllers... like yield in rails
    -->
    <div class="row">
      <h1>Ordr</h1>
      <hr />
      <p>{{outlet}}</p>
    </div>    
  </script>

  <!--
  This template gets rendered through the outlet of the application template; whenever the index route is active
  -->
  <script type="text/x-handlebars" data-template-name="index">
    Hello, Ember
  </script>

  <!--
  template to hadle the #/tables route
  -->
  <script type="text/x-handlebars" data-template-name="tables">
    <div class="row">
      <div class="four columns" id="tables">
        <!--
        a partial is similar to an outlet, in that it designates where other templtes may render within itthe main difference is that the same controller is used by the partial
        its main utility is in splitting up larger more complex tempaltes into smaller, more manageable ones
        note that the other reason why we used a partial for the table menu template earlier is because it can be reused
        -->
        {{partial "tableMenu"}}
      </div>
      <!--
      Remember that the table resource is nested within the tables reource is the router - so the outlet here will render a table template
      When we do directly to the url #/tables/4, ember will load both the tables resource for this template (tables) and the table resource for the child template (table)
      Ember assumes that if resources are nested, you will want to display the data up the hierachy - this is the master detail patern
        - master shows the list of all models - shows a limited amount of info about each, serves as navigation
        - detail shows the info about a single model - shows all the information about the model
        - by keeping all dta up the hierarchy in memory, ember supports this pattern well
      -->
      <div class="eight columns" id="order">
        {{outlet}}
      </div>
    </div>
  </script>

  <!--
  note that the id of the templates for a partials are prepended with an underscore
  -->
  <script type="text/x-handlebars" data-template-name="_tableMenu">
    <h2>Tables</h2>
    <!--
    we use the controller to proxy its model data.
    since this template`s controller is an array controller we iterate over a list of models
    -->
    {{#each table in controller}}
      <!-- displaying just the ids for now -->
      {{#linkTo "table" table class="panel six columns"}}
        <!--
        The linkTo helper takes 2 arguments:
        1. The name of the resource we defined in the router - must be in string
        2. The model object that will be used to populate the resource - should be a model variable
        -->
        <!--
        Any other HTML attributes can go within the linkTo helper
        Ember`s linkTo automatically toggles a CSS class of active only the one currently selected
        Refresh the page and notice that when you click on each, the URL hash fragment updtes and the colour is toggled
        Similarly if you update the URL, the current table is recoloured as it is active
        -->
        {{table.id}}
      {{/linkTo}}
    {{/each}}
  </script>

  <!--
  We have a table route already, but do display content we will also need s table view
  A table view is generated by ember when a table template is specified (and the route is also specified)
  -->
  <script type="text/x-handlebars" data-template-name="table">
    <h2>Table <span>{{id}}</span></h2>
  </script>

    <script src="js/libs/jquery-1.8.3.min.js"></script>
    <script src="js/libs/handlebars-1.0.0.rc.2.js"></script>
    <script src="js/libs/ember.js"></script>
    <script src="js/libs/ember-data.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
